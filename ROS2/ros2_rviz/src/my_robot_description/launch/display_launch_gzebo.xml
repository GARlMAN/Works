<launch xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Set path to URDF -->
  <let name="urdf_path" 
        value="$(find-pkg-share my_robot_description)/urdf/my_robot.urdf.xacro" />

  <!-- Launch Gazebo -->
  <include file="$(find-pkg-share gazebo_ros)/launch/gazebo.launch.py" />

  <!-- Robot State Publisher -->
  <node pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description" 
           command="$(command 'xacro $(var urdf_path)')" />
  </node>

  <!-- Spawn robot into Gazebo -->
  <node pkg="gazebo_ros" exec="spawn_entity.py" output="screen">
    <arg name="entity" value="my_robot" />
    <arg name="topic" value="/robot_description" />
    <arg name="x" value="0" />
    <arg name="y" value="0" />
    <arg name="z" value="0.1" />
  </node>

</launch>
